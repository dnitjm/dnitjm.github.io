$(document).ready(function(){function t(t,e){var i=$(this).closest(".line").next(".es-list").find(".selected"),l=i.data(t),a=i.data(e),n=$(this).closest(".dropdown").siblings(".datainputs");n.find(":first-child").val(l),n.find(":last-child").val(a)}function e(){var t=$(this).closest("fieldset").find(".line").length;t>1&&$(this).closest("fieldset").find(".line:last-of-type").remove()}$("#standard").editableSelect({filter:!1,effects:"slide",onSelect:function(e){t.call(this,"standby","duty")}}),$("#amplifier_1").editableSelect({filter:!1,effects:"slide",onSelect:function(){t.call(this,"qpower","dcpower")}}),$("body").on("click",".add_amplifier",function(){var e=$("#fieldset_amplifiers"),i=$(this).closest(".line").clone();e.find(".es-list:last-of-type").after(i);var l=e.find(".line:last-of-type").find(".dropdown"),a=e.find(".line").length;l.find("input").remove(),l.find("select").attr("id","amplifier_"+a).editableSelect({filter:!1,effects:"slide",onSelect:function(e){t.call(this,"qpower","dcpower")}}).css("display","inline-block"),l.siblings(".datainputs").find("input").each(function(){$(this).val("")}),l.siblings(".amplifier_name").find("input").val("").attr("placeholder","Amplifier #"+a)}),$("body").on("click",".add_otheritem",function(){var t=$("#fieldset_otheritems"),e=$(this).closest(".line").clone();t.append(e);var i=t.find(".line").length,l=t.find(".line:last-of-type");l.find('input[type="text"]').val("").attr("placeholder","Item #"+i),l.find('input[type="number"]').val("")}),$("#calculate").on("click",function(){$(".error, #result_inv, #result_bat").html("");var t=0;$(".amplifiers_data-dcpower").each(function(){t+=parseInt($(this).val())}),totalQP=0,$(".amplifiers_data-qpower").each(function(){totalQP+=parseInt($(this).val())}),totalOther=0,$(".otheritem_value").each(function(){totalOther+=parseInt($(this).val())});var e=parseInt($("#standard_data-standby").val()),i=parseInt($("#standard_data-duty").val())/60,l=parseInt($("#voltage").val()),a=parseInt($("#error_margin").val())/100;if(isNaN(t)||isNaN(totalQP)||isNaN(totalOther)||isNaN(e)||isNaN(i)||isNaN(l)||isNaN(a))$(".error").html("Please fill in all the fields");else{var n=1.2*(t/8+totalOther)/l,s=(totalQP+totalOther)/l*e,o=(t/8+totalOther)/l*i,r=s+o,d=(n+n*a).toFixed(3),f=(r+r*a).toFixed(3);$("#result_inv").html(d),$("#result_bat").html(f)}}),$(".remove_amplifier, .remove_otheritem").on("click",function(){e.call(this)}),$(".remove_amplifier").on("click",function(){$(this).closest("fieldset").find(".es-list:last-of-type").remove()})});